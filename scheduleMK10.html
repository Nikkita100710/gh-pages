<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>–†–æ–∑–∫–ª–∞–¥ 10-–í | –û–¥–∏–Ω –¥–µ–Ω—å</title>
<style>
  :root{
    --bg: linear-gradient(135deg,#667eea 0%,#764ba2 100%);
    --card:#fff; --text:#222; --muted:#6c757d; --brand:#667eea;
    --shadow:0 10px 30px rgba(0,0,0,.2);
    --row:#ffffff; --row-alt:#f6f7f9;
    --current:#dc3545; --next:#28a745;
    --today-bg:#d4edda; --today-border:#28a745;
    --radius:16px; --tr:260ms ease;
  }
  *{box-sizing:border-box;margin:0;padding:0}
  body{font-family:"Segoe UI",Tahoma,Verdana,sans-serif;min-height:100vh;background:var(--bg);padding:20px;color:var(--text)}
  .container{max-width:1100px;margin:0 auto}
  header h1{color:#fff;text-align:center;margin-bottom:14px;font-size:2.1rem;text-shadow:2px 2px 4px rgba(0,0,0,.3)}

  /* –æ–±—ë—Ä—Ç–∫–∞ –¥–Ω—è */
  .day-wrap{border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden;margin-bottom:16px;background:#fff}
  .day-wrap.is-today{border:3px solid var(--today-border);background:var(--today-bg)}

  /* —à–∞–ø–∫–∞ –¥–Ω—è */
  .day-bar{display:grid;grid-template-columns:48px 1fr auto 48px;align-items:center;gap:8px;background:#fff;padding:10px 12px}
  .nav-btn{border:none;border-radius:12px;min-width:44px;min-height:44px;cursor:pointer;background:#eaeefe;color:#2f2f7a;font-weight:700}
  .day-center{display:flex;flex-direction:column;align-items:center;justify-content:center}
  .pill{background:#fff;border:2px solid #e9ecef;border-radius:14px;padding:8px 14px;font-weight:800}
  .meta{margin-top:4px;color:#666;font-weight:600;font-size:.95rem}
  .today-btn{border:none;border-radius:12px;padding:10px 14px;background:#2f9e44;color:#fff;font-weight:700;min-height:44px}
  .today-btn.hidden{display:none}

  /* —Ç–∞–±–ª–∏—Ü–∞ */
  .card{background:var(--card);border-radius:0 0 var(--radius) var(--radius);box-shadow:var(--shadow);overflow:hidden}
  table{width:100%;border-collapse:collapse}
  thead th{background:var(--brand);color:#fff;text-align:center;padding:10px 12px;font-weight:600}
  colgroup col.c1{width:5.5%}  /* ‚Ññ ‚Äî –±–ª–∏–∂–µ –∫ –≤—Ä–µ–º–µ–Ω–∏ */
  colgroup col.c2{width:22%}
  colgroup col.c3{width:42%}
  colgroup col.c4{width:30.5%}

  tbody tr:nth-child(odd) td{background:var(--row)}
  tbody tr:nth-child(even) td{background:var(--row-alt)}
  tbody td{padding:10px 10px;vertical-align:middle;border-bottom:1px solid #e5e7eb;transition:background-color var(--tr),color var(--tr)}

  /* —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å—Ç—Ä–æ–∫ */
  tbody tr.current td{background:var(--current)!important;color:#fff!important;font-weight:700}
  tbody tr.next td{background:var(--next)!important;color:#fff!important;font-weight:700}

  /* —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ */
  .cell-left{text-align:left;white-space:nowrap}
  .cell-time{text-align:left;white-space:nowrap;font-weight:600;color:#495057;line-height:1.15}
  .cell-subject{text-align:left}
  .subject-name{font-weight:700}
  .links{margin-top:4px;display:flex;gap:12px;align-items:center}
  .icon-link{display:inline-flex;align-items:center;justify-content:center;width:26px;height:26px;padding:9px;border-radius:10px;cursor:pointer;text-decoration:none;transition:transform .15s ease,opacity .2s ease,filter .2s ease}
  .icon-link:hover{transform:scale(1.1)}
  .icon-link.disabled{opacity:.38;cursor:not-allowed;filter:grayscale(1)}
  .icon{width:100%;height:100%}

  .teacher{text-align:center;color:var(--muted);line-height:1.15}
  .teacher .line{display:block}

  /* –º–æ–±–∏–ª–∫–∏: –Ω–∞ —à–∞–≥ –∫–æ–º–ø–∞–∫—Ç–Ω–µ–µ, —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤ */
  @media (max-width:640px){
    tbody td{padding:8px 8px}
    .cell-time{font-size:.88em}
    .subject-name{font-size:.94em}
    .teacher{font-size:.84em}
    .icon-link{width:24px;height:24px;padding:8px}
  }
</style>
</head>
<body>
<div class="container">
  <header><h1>üìö –†–æ–∑–∫–ª–∞–¥ —É—Ä–æ–∫—ñ–≤ 10-–í –∫–ª–∞—Å—É</h1></header>

  <div class="day-wrap" id="wrap">
    <div class="day-bar">
      <button class="nav-btn" id="prevBtn" title="–ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –¥–µ–Ω—å">‚óÄ</button>

      <div class="day-center">
        <div class="pill" id="dayName">–í—ñ–≤—Ç–æ—Ä–æ–∫</div>
        <div class="meta" id="dayMeta">11.11.2025, 16:31:01</div>
      </div>

      <button class="today-btn" id="todayBtn">–°—å–æ–≥–æ–¥–Ω—ñ</button>
      <button class="nav-btn" id="nextBtn" title="–ù–∞—Å—Ç—É–ø–Ω–∏–π –¥–µ–Ω—å">‚ñ∂</button>
    </div>

    <div class="card">
      <table>
        <colgroup>
          <col class="c1"><col class="c2"><col class="c3"><col class="c4">
        </colgroup>
        <thead>
          <tr><th>‚Ññ</th><th>–ß–∞—Å</th><th>–ü—Ä–µ–¥–º–µ—Ç</th><th>–í–∏–∫–ª–∞–¥–∞—á</th></tr>
        </thead>
        <tbody id="tbody"></tbody>
      </table>
    </div>
  </div>
</div>

<script>
/* ===== –î–ê–ù–ù–´–ï (–∫–∞–∫ —É –≤–∞—Å) ===== */
const scheduleData = {/* –í–°–¢–ê–í–¨–¢–ï –°–í–û–ò –î–ê–ù–ù–´–ï ‚Äî –æ—Å—Ç–∞–≤–∏–ª –≤–∞—à–∏ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏ */};

// –ø–æ—Ä—è–¥–æ–∫ –¥–Ω–µ–π
const daysOrder=["–ü–æ–Ω–µ–¥—ñ–ª–æ–∫","–í—ñ–≤—Ç–æ—Ä–æ–∫","–°–µ—Ä–µ–¥–∞","–ß–µ—Ç–≤–µ—Ä","–ü'—è—Ç–Ω–∏—Ü—è","–°—É–±–æ—Ç–∞"];
// —ç–ª–µ–º–µ–Ω—Ç—ã
const tbody=document.getElementById("tbody");
const dayNameEl=document.getElementById("dayName");
const dayMetaEl=document.getElementById("dayMeta");
const wrap=document.getElementById("wrap");
const btnPrev=document.getElementById("prevBtn");
const btnNext=document.getElementById("nextBtn");
const btnToday=document.getElementById("todayBtn");

// —É—Ç–∏–ª–∏—Ç—ã
const pad=n=>n<10?("0"+n):n;
const parseHM=hm=>{const [h,m]=hm.split(":").map(Number);return h*60+m;};
const parseRange=str=>{const [a,b]=str.split(" - ");return [parseHM(a),parseHM(b)];};
const todayIdx=()=>{const d=new Date().getDay();return d===0?0:d-1;};
function splitTeacher(t){const p=(t||"").trim().split(/\s+/);if(!p.length)return["","",""];if(p.length===2)return[p[0],p[1],""];
  return [p[0],p[1]||"",p.slice(2).join(" ")||""];}

// SVG
const classroomSVG=() => `<svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
  <rect x="2" y="4" width="20" height="14" rx="2" fill="#25A25A"/>
  <rect x="3.5" y="5.5" width="17" height="11" rx="1.5" fill="#2FB36A"/>
  <circle cx="12" cy="11" r="2.6" fill="#fff"/>
  <path d="M7.5 16.5c.9-2.2 2.9-3.5 4.5-3.5s3.6 1.3 4.5 3.5" fill="#fff"/>
  <rect x="4" y="19" width="16" height="2" rx="1" fill="#F4B400"/></svg>`;
const driveSVG=() => `<svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
  <path d="M7.5 3L2 12l3.5 6h5L12 12 7.5 3z" fill="#1A73E8"/>
  <path d="M16.5 3H7.5L12 12h9l-4.5-9z" fill="#34A853"/>
  <path d="M5.5 18L2 12h9l3.5 6h-9z" fill="#FBBC04"/>
  <path d="M21 12l-3.5 6h-5L12 12h9z" fill="#EA4335"/></svg>`;

// —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è –¥–ª–∏–Ω–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –¥–ª—è –º–æ–±–∏–ª–æ–∫ (–∏ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
function shortenSubject(name){
  const map={
    "–ì—Ä–æ–º–∞–¥—è–Ω—Å—å–∫–∞ –æ—Å–≤—ñ—Ç–∞":"–ì—Ä–æ–º–∞–¥. –æ—Å–≤—ñ—Ç–∞",
    "–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞ –ª—ñ—Ç–µ—Ä–∞—Ç—É—Ä–∞":"–£–∫—Ä. –ª—ñ—Ç-—Ä–∞",
    "–ê–Ω–≥–ª—ñ–π—Å—å–∫–∞ –º–æ–≤–∞":"–ê–Ω–≥–ª. –º–æ–≤–∞",
    "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ (–ì–µ–æ–º–µ—Ç—Äi—è)":"–ú–∞—Ç-–∫–∞ (–ì–µ–æ–º–µ—Ç—Äi—è)",
    "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ (–ì–µ–æ–º–µ—Ç—Ä—ñ—è)":"–ú–∞—Ç-–∫–∞ (–ì–µ–æ–º–µ—Ç—Ä—ñ—è)",
    "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ (–ê–ª–≥–µ–±—Ä–∞)":"–ú–∞—Ç-–∫–∞ (–ê–ª–≥–µ–±—Ä–∞)"
  };
  const isMobile = window.matchMedia("(max-width: 640px)").matches;
  if(!isMobile) return name;
  // –µ—Å–ª–∏ –µ—Å—Ç—å —Ç–æ—á–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ
  if(map[name]) return map[name];
  // –æ–±—â–µ–µ –ø—Ä–∞–≤–∏–ª–æ: –µ—Å–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ > 22 —Å–∏–º–≤–æ–ª–æ–≤ ‚Äî —Å–æ–∫—Ä–∞—â–∞–µ–º ¬´–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞¬ª/¬´–ê–Ω–≥–ª—ñ–π—Å—å–∫–∞¬ª ‚Üí ¬´–£–∫—Ä.¬ª/¬´–ê–Ω–≥–ª.¬ª
  if(name.length>22){
    return name.replace(/^–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞\s/,"–£–∫—Ä. ")
               .replace(/^–ê–Ω–≥–ª—ñ–π—Å—å–∫–∞\s/,"–ê–Ω–≥–ª. ");
  }
  return name;
}

// —Å–æ—Å—Ç–æ—è–Ω–∏–µ
let activeIndex=todayIdx(), clockTimer=null, stateTimer=null;
function setClock(isToday){
  if(isToday){
    if(clockTimer) return;
    const tick=()=>{const d=new Date();
      dayMetaEl.textContent=`${pad(d.getDate())}.${pad(d.getMonth()+1)}.${d.getFullYear()}, ${pad(d.getHours())}:${pad(d.getMinutes())}:${pad(d.getSeconds())}`;};
    tick(); clockTimer=setInterval(tick,1000);
  }else{
    if(clockTimer){clearInterval(clockTimer);clockTimer=null;}
    const d=new Date();
    dayMetaEl.textContent=`${pad(d.getDate())}.${pad(d.getMonth()+1)}.${d.getFullYear()}`;
  }
}

function renderDay(idx){
  const day=daysOrder[idx], lessons=scheduleData[day]||[];
  dayNameEl.textContent=day;

  const isToday = (idx===todayIdx());
  wrap.classList.toggle("is-today",isToday);
  btnToday.classList.toggle("hidden",isToday);
  setClock(isToday);

  tbody.innerHTML="";
  lessons.forEach(L=>{
    const tr=document.createElement("tr");

    const td1=document.createElement("td"); td1.className="cell-left"; td1.textContent=L.lesson;
    const td2=document.createElement("td"); td2.className="cell-time"; td2.textContent=L.time;

    const td3=document.createElement("td"); td3.className="cell-subject";
    const subj=document.createElement("div"); subj.className="subject-name";
    subj.textContent=shortenSubject(L.subject);
    const links=document.createElement("div"); links.className="links";
    links.innerHTML=
      (L.classroom?`<a class="icon-link" href="${L.classroom}" target="_blank" title="Google Classroom" aria-label="Google Classroom">${classroomSVG()}</a>`:
                    `<span class="icon-link disabled" title="–ù–µ–º–∞—î Classroom">${classroomSVG()}</span>`)
    + (L.textbook?`<a class="icon-link" href="${L.textbook}" target="_blank" title="Google Drive" aria-label="Google Drive">${driveSVG()}</a>`:
                    `<span class="icon-link disabled" title="–ù–µ–º–∞—î –ø–æ—Å–∏–ª–∞–Ω–Ω—è">${driveSVG()}</span>`);
    td3.appendChild(subj); td3.appendChild(links);

    const td4=document.createElement("td"); td4.className="teacher";
    const [ln,fn,pn]=splitTeacher(L.teacher);
    td4.innerHTML=`<span class="line">${ln||""}</span><span class="line">${fn||""}</span><span class="line">${pn||""}</span>`;

    tr.append(td1,td2,td3,td4); tbody.appendChild(tr);
  });

  applyState(idx);
}

function applyState(idx){
  if(stateTimer){clearTimeout(stateTimer);stateTimer=null;}
  const trs=[...tbody.querySelectorAll("tr")];
  trs.forEach(r=>r.classList.remove("current","next"));

  const isToday=(idx===todayIdx()); if(!isToday) return;

  const day=daysOrder[idx], lessons=scheduleData[day]||[]; if(!lessons.length) return;

  const now=new Date();
  const nowMin = now.getHours()*60 + now.getMinutes() + now.getSeconds()/60;

  const starts=lessons.map(L=>parseRange(L.time)[0]);
  const ends  =lessons.map(L=>parseRange(L.time)[1]);

  let current=-1,next=-1;
  for(let i=0;i<lessons.length;i++){
    const [s,e]=parseRange(lessons[i].time);
    if(nowMin>=s && nowMin<e){ current=i; break; }
    if(nowMin<s){ next=i; break; }
  }

  // ¬´–∑–∞ 20 –º–∏–Ω –¥–æ –ø–µ—Ä–≤–æ–≥–æ¬ª
  const firstStart=starts[0], preFirst=firstStart-20;
  const inPreFirst = (nowMin>=preFirst && nowMin<firstStart && current===-1 && (next===0 || next===-1));

  if(current!==-1) trs[current].classList.add("current");
  if(current===-1){
    if(next!==-1) trs[next].classList.add("next");
    if(inPreFirst) trs[0].classList.add("next");
  }

  // —Å–ª–µ–¥—É—é—â–∏–π —Ç–∞–π–º–∞—É—Ç ‚Äî —Ä–æ–≤–Ω–æ –∫ –±–ª–∏–∂–∞–π—à–µ–º—É —Å–æ–±—ã—Ç–∏—é
  const events=[];
  starts.forEach(m=>events.push(m)); ends.forEach(m=>events.push(m));
  events.push(preFirst); events.push(firstStart);

  let minMs=null, nowAbs=now.getHours()*60 + now.getMinutes() + now.getSeconds()/60;
  for(const t of events){ const diff=(t-nowAbs)*60*1000; if(diff>0 && (minMs===null||diff<minMs)) minMs=diff; }
  if(minMs===null){
    const tomorrow=new Date(now.getFullYear(),now.getMonth(),now.getDate()+1,0,0,1);
    minMs=tomorrow-now;
  }
  stateTimer=setTimeout(()=>applyState(idx),Math.ceil(minMs));
}

// –Ω–∞–≤–∏–≥–∞—Ü–∏—è
function prevDay(){activeIndex=(activeIndex-1+daysOrder.length)%daysOrder.length;renderDay(activeIndex);}
function nextDay(){activeIndex=(activeIndex+1)%daysOrder.length;renderDay(activeIndex);}
function goToday(){activeIndex=todayIdx();renderDay(activeIndex);}
document.getElementById("prevBtn").addEventListener("click",prevDay);
document.getElementById("nextBtn").addEventListener("click",nextDay);
document.getElementById("todayBtn").addEventListener("click",goToday);
document.addEventListener("keydown",e=>{
  if(e.key==="ArrowLeft")prevDay();
  if(e.key==="ArrowRight")nextDay();
  if(e.key.toLowerCase()==="t")goToday();
});

// —Å—Ç–∞—Ä—Ç
renderDay(activeIndex);
</script>
</body>
</html>
